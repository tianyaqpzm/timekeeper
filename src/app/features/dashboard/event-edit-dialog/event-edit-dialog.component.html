@if (isOpen && event) {
<div class="dialog-overlay fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
    (click)="onCancel()">
    <div class="dialog-container bg-white dark:bg-surface-dark rounded-2xl shadow-2xl max-w-md w-full p-6 dark:text-white"
        (click)="$event.stopPropagation()">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold">Edit Event</h2>
            <button (click)="onCancel()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <div class="space-y-4">
            <!-- Title -->
            <div>
                <label class="block text-sm font-medium mb-2">Event Title</label>
                <input type="text" [(ngModel)]="event.title"
                    class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1c1f27] rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
            </div>

            <!-- Category -->
            <div>
                <label class="block text-sm font-medium mb-2">Category</label>
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Select Category</mat-label>
                    <mat-select [(ngModel)]="event.category">
                        <mat-option value="Birthday">Birthday</mat-option>
                        <mat-option value="Anniversary">Anniversary</mat-option>
                        <mat-option value="Holiday">Holiday</mat-option>
                        <mat-option value="Vacation">Vacation</mat-option>
                        <mat-option value="Concert">Concert</mat-option>
                        <mat-option value="Graduation">Graduation</mat-option>
                        <mat-option value="Retirement">Retirement</mat-option>
                        <mat-option value="Other">Other</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- Date -->
            <div>
                <label class="block text-sm font-medium mb-2">Date</label>
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Pick a date</mat-label>
                    <input matInput [matDatepicker]="picker" [(ngModel)]="event.date">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>

            <!-- Time -->
            <div>
                <label class="block text-sm font-medium mb-2">Time (Optional)</label>
                <input type="time" [(ngModel)]="event.time"
                    class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1c1f27] rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
            </div>

            <!-- Description -->
            <div>
                <label class="block text-sm font-medium mb-2">Description</label>
                <textarea [(ngModel)]="event.description"
                    class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1c1f27] rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none"
                    rows="3"></textarea>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-3 mt-8">
            <button type="button" (click)="onCancel()"
                class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors font-medium cursor-pointer">
                Cancel
            </button>
            <button type="button" (click)="onSave()" (mousedown)="$event.preventDefault()" (mouseup)="onSave()"
                class="flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors font-medium cursor-pointer shadow-md hover:shadow-lg">
                Save Changes
            </button>
        </div>
    </div>
</div>
}